# 区分localStorage,sessionStorage和cookie

1. 生命周期
   1. cookie
      1. 如果设置了max-age,只要没有超过最大存活时间而且不主动销毁,那么cookie一直存在
      2. 如果不设置max-age,关闭当前标签页或者浏览器,当前cookie就会销毁
         1. 不设置max-age的cookie,成为**会话级cookie**
   2. localStorage
      1. 只要不主动销毁,那么localStorage的存储时间无限
   3. sessionStorage
      1. 关闭当前标签页或者浏览器,那么sessionStorage就会销毁
2. 存储位置
   1. cookie
      1. 如果设置了max-age,存储于硬盘
      2. 如果不设置max-age,存储于内存
   2. localStorage
      1. 存储于硬盘
   3. sessionStorage
      1. 存储于内存
3. 存储大小
   1. cookie
      1. 4KB
   2. localStorage
      1. 一般是5MB,IE大约3MB
   3. sessionStorage
      1. 一般是5MB,IE大约3MB
4. 与服务器之间的关系
   1. cookie(被借用的本地存储)
      1. 发送请求,会自动携带cookie
      2. **服务器创建,浏览器存储**
      3. 问题:服务器是如何将cookie传输给浏览器的?
         1. 服务器通过给响应头添加**Set-Cookie**属性,告知浏览器所需要存储的cookie数据
         2. **浏览器将接收到的cookie数据,存储起来**
      4. 问题:浏览器是如何将cookie传输给服务器的?
         1. 浏览器通过请求头添加**Cookie**属性,告知服务器cookie数据
   2. localStorage(本地存储,持久化存储)
      1. 他和服务器不熟
      2. 他是HTML5新特性,本地存储方案
   3. sessionStorage(临时存储)
      1. 他和服务器不熟
5. 作用范围
   1. cookie
      1. 与domain属性有关,该属性由服务器设置
         1. cookie只能作用于domain所记录的域名以及后续子路由
   2. localStorage
      1. localStorage只能作用域当前域名
   3. sessionStorage
      1. sessionStorage只能作用于当前标签页
6. 这三者在使用过程中有什么区别
   1. cookie
      1. 发送请求,会自动携带cookie
         1. 无论当前请求是否需要cookie,都会自动传输,导致占用带宽
      2. cookie太小
      3. cookie可以被用户禁用,可能导致功能失效
      4. cookie的读取和修改权限都受到服务器控制
         1. 服务器可以设置HttpOnly属性,使得浏览器无法读取到该cookie
   2. localStorage
      1. 发送请求,不会自动携带,是否携带,完全取决于开发者代码逻辑
      2. localStorage无法被禁用
      3. localStorage不受服务器控制
   3. sessionStorage
      1. 发送请求,不会自动携带,是否携带,完全取决于开发者代码逻辑
      2. sessionStorage无法被禁用
      3. sessionStorage不受服务器控制
7. 面试题:如何实现跨页面通信?
   1. 通过localStorage配合storage事件实现
      1. B页面先给window对象绑定事件监听,事件名:storage
      2. A页面使用localStorage.setItem存储数据
      3. B页面会自动执行storage事件的回调函数,事件对象中可以得到A页面传递过来的数据
8. token与上述三者之间的关系
   1. token的本质:字符串
   2. token不是一个存储数据的技术,他只是一个将用户唯一标识加密得到的乱码字符串
   3. 唯一的关系:就是我们有可能将token字符串存入到以上三种技术中

