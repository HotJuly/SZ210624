# 用户授权集合

1. 截至21/11/19,一共出现了三种获取用户个人信息的方法
2. 用户首次登录授权
   1. 早期
      1. API:wx.getUserInfo(Object object)
      2. 在小程序早期,直接调用该API就可以弹出授权窗口(由于非常影响用户体验,所以该方法很快就被废弃了)
   2. 中期(使用时间最久的版本)
      1. 前提:该版本由于已经正式废弃,所以需要将基础库版本切换至2.14.1
      2. 使用组件:button
         1. 流程:
            1. 在页面使用button组件,并给其添加标签属性open-type="getUserInfo"
            2. 给button组件绑定事件,事件名:getuserinfo
            3. 在回调函数中,通过形参event可以获取到用户的个人信息(event.detail)
            4. 将获取到的个人信息数据,更新到data中
            5. 在wxml中,使用data数据进行动态显示
   3. 最新(在21年4月份,正式使用)
      1. API:wx.getUserProfile(Object object)
      2. 注意:
         1. desc属性必传
         2. 该API无法在onLoad中执行,必须要有产生tap事件才能使用
         3. 在最新版本中,如果想要实现二次登陆免授权功能,只能开发者自己实现(自己缓存用户首次登录的信息)
3. 二次登录免授权(**静默登录**)
   1. 需求:当用户进入当前页面时,自动获取用户信息,并进行展示
   2. 拆解:
      1. 当用户进入当前页面时
         1. 需要监视用户操作(生命周期)
      2. 自动获取用户信息
         1. 通过js的api实现获取用户信息
         2. API:wx.getUserInfo(Object object)
         3. 注意:如果用户没有经过首次登录授权流程,该API无效
      3. 进行展示
         1. 将data中的数据在wxml中使用插值语法进行展示
4. 奇特的组件
   1. 组件名:open-data
   2. 该组件很鸡肋,可以看,不能用(无法获取到显示出来的用户信息,所以对于开发者来说没用)

